{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Downloads/portfolio-website-for-developer/app/api/contact/route.ts"],"sourcesContent":["import nodemailer from 'nodemailer';\r\nimport { NextResponse } from 'next/server';\r\n\r\nexport const runtime = 'nodejs';\r\n\r\ntype RequestBody = {\r\n  name: string;\r\n  email: string;\r\n  subject: string;\r\n  message: string;\r\n};\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const body: RequestBody = await req.json();\r\n    const { name, email, subject, message } = body;\r\n\r\n    if (!name || !email || !subject || !message) {\r\n      return NextResponse.json(\r\n        { error: 'Missing required fields' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // SMTP configuration from environment variables\r\n    const host = process.env.SMTP_HOST;\r\n    const port = process.env.SMTP_PORT\r\n      ? Number(process.env.SMTP_PORT)\r\n      : undefined;\r\n    const user = process.env.SMTP_USER;\r\n    const pass = process.env.SMTP_PASS;\r\n    const secure = process.env.SMTP_SECURE === 'true';\r\n\r\n    if (!host || !port || !user || !pass) {\r\n      return NextResponse.json(\r\n        { error: 'SMTP not configured on server' },\r\n        { status: 500 }\r\n      );\r\n    }\r\n\r\n    const transporter = nodemailer.createTransport({\r\n      host,\r\n      port,\r\n      secure: !!secure,\r\n      auth: {\r\n        user,\r\n        pass,\r\n      },\r\n    });\r\n\r\n    const from = process.env.SMTP_FROM || user;\r\n\r\n    const mailOptions = {\r\n      from: `Portfolio Contact <${from}>`,\r\n      to: 'amredinseid29@gmail.com',\r\n      subject: `[Portfolio] ${subject}`,\r\n      text: `From: ${name} <${email}>\\n\\n${message}`,\r\n      html: `<p><strong>From:</strong> ${name} &lt;${email}&gt;</p><p><strong>Message:</strong></p><p>${String(\r\n        message\r\n      ).replace(/\\n/g, '<br/>')}</p>`,\r\n    };\r\n\r\n    await transporter.sendMail(mailOptions);\r\n\r\n    return NextResponse.json({ ok: true });\r\n  } catch (err) {\r\n    console.error('Error sending contact email:', err);\r\n    return NextResponse.json(\r\n      { error: 'Failed to send message' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;AACA;;;AAEO,MAAM,UAAU;AAShB,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAoB,MAAM,IAAI,IAAI;QACxC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG;QAE1C,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,CAAC,SAAS;YAC3C,OAAO,yMAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA0B,GACnC;gBAAE,QAAQ;YAAI;QAElB;QAEA,gDAAgD;QAChD,MAAM,OAAO,QAAQ,GAAG,CAAC,SAAS;QAClC,MAAM,OAAO,QAAQ,GAAG,CAAC,SAAS,GAC9B,OAAO,QAAQ,GAAG,CAAC,SAAS,IAC5B;QACJ,MAAM,OAAO,QAAQ,GAAG,CAAC,SAAS;QAClC,MAAM,OAAO,QAAQ,GAAG,CAAC,SAAS;QAClC,MAAM,SAAS,QAAQ,GAAG,CAAC,WAAW,KAAK;QAE3C,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM;YACpC,OAAO,yMAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAgC,GACzC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,cAAc,WAAW,eAAe,CAAC;YAC7C;YACA;YACA,QAAQ,CAAC,CAAC;YACV,MAAM;gBACJ;gBACA;YACF;QACF;QAEA,MAAM,OAAO,QAAQ,GAAG,CAAC,SAAS,IAAI;QAEtC,MAAM,cAAc;YAClB,MAAM,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC;YACnC,IAAI;YACJ,SAAS,CAAC,YAAY,EAAE,SAAS;YACjC,MAAM,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE,MAAM,KAAK,EAAE,SAAS;YAC9C,MAAM,CAAC,0BAA0B,EAAE,KAAK,KAAK,EAAE,MAAM,2CAA2C,EAAE,OAChG,SACA,OAAO,CAAC,OAAO,SAAS,IAAI,CAAC;QACjC;QAEA,MAAM,YAAY,QAAQ,CAAC;QAE3B,OAAO,yMAAY,CAAC,IAAI,CAAC;YAAE,IAAI;QAAK;IACtC,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO,yMAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAyB,GAClC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}